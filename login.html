<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paixão e Saúde - Gestão de Saúde Ocupacional</title>

<link
href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
rel="stylesheet">
<style>
/* ===== ESTILOS GERAIS ===== */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Poppins', sans-serif;
  background-color: #f5f7fa;
  color: #333;
  line-height: 1.6;
}

.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* ===== CABEÇALHO ===== */
header {
  width: 100%;
  background: linear-gradient(135deg, #841c92, #9f16bb);
  color: white;
  padding: 1.5rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}
@media (max-width: 768px) {
  header {
    flex-direction: column; /* Empilha verticalmente */
    align-items: flex-start;
    gap: 1rem; /* Espaço entre título e botões */
    padding: 1rem; /* Reduz padding no mobile */
  }
  
  header h1 {
    font-size: 1.5rem; /* Reduz tamanho do título */
  }
  
  .lead {
    font-size: 0.85rem; /* Reduz texto menor */
    max-width: 100%; /* Ocupa toda largura */
  }
  
  .controls {
    width: 100%; /* Botões ocupam largura total */
    justify-content: flex-start; /* Alinha à esquerda */
    gap: 0.5rem; /* Reduz espaço entre botões */
  }
  
  .btn {
    padding: 0.5rem 0.8rem; /* Botões menores */
    font-size: 0.8rem;
  }
}
header h1 {
  font-size: 1.8rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.lead {
  font-size: 0.95rem;
  opacity: 0.9;
  max-width: 400px;
}

.controls {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
}

/* ===== BOTÕES ===== */
.btn {
  padding: 0.6rem 1.2rem;
  border: none;
  border-radius: 6px;
  font-family: 'Poppins', sans-serif;
  font-size: 0.9rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn-primary {
  background-color: #bd2eda;
  color: white;
}

.btn-primary:hover {
  background-color: #1565c0;
}

.btn-ghost {
  background-color: transparent;
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.btn-ghost:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.btn-danger {
  background-color: #e53935;
  color: white;
}

.btn-danger:hover {
  background-color: #c62828;
}

/* ===== CONTEÚDO PRINCIPAL ===== */
main {
  flex: 1;
  padding: 2rem;
}

.grid {
  display: grid;
  grid-template-columns: 350px 1fr;
  gap: 2rem;
}

@media (max-width: 1024px) {
  .grid {
    grid-template-columns: 1fr;
  }
}

/* ===== CARDS ===== */
.card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

/* ===== FORMULÁRIO ===== */
form {
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

.field {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

label {
  font-weight: 500;
  font-size: 0.9rem;
  color: #555;
}

input, select, textarea {
  padding: 0.75rem;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-family: 'Poppins', sans-serif;
  font-size: 0.9rem;
  transition: border 0.3s;
}

input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: #1e88e5;
}

.row {
  display: flex;
  gap: 1rem;
}

.col {
  flex: 1;
}

.form-actions {
  display: flex;
  gap: 0.75rem;
  margin-top: 0.5rem;
}

.chip {
  background-color: #f1f8ff;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  font-size: 0.9rem;
}

.small {
  font-size: 0.85rem;
  margin-bottom: 0.25rem;
}

/* ===== TABELA ===== */
.filters {
  display: flex;
  gap: 1rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.search {
  flex: 1;
  min-width: 200px;
}

.table {
  width: 100%;
  border-collapse: collapse;
}

.table th {
  text-align: left;
  padding: 1rem;
  background-color: #f8f9fa;
  font-weight: 600;
  color: #555;
  border-bottom: 1px solid #eee;
}

.table td {
  padding: 1rem;
  border-bottom: 1px solid #eee;
}

.table-wrapper {
    overflow-x: auto;
    border-radius: 8px;
    background: white;
    margin-top: 1rem;
}

.empty {
  text-align: center;
  color: #888;
  padding: 2rem;
}

.totals {
  display: flex;
  gap: 1rem;
  margin-top: 1.5rem;
  flex-wrap: wrap;
}
/* Para a seção específica da tabela */
section.card:has(.table-wrapper) {
    background: transparent;
    box-shadow: none;
    padding: 0;
}
/* ===== RODAPÉ ===== */
footer {
  background-color: #263238;
  color: #eceff1;
  text-align: center;
  padding: 1.5rem;
  margin-top: auto;
}
@media (max-width: 768px) {
  footer {
    padding: 1rem; /* Reduz padding */
    font-size: 0.85rem; /* Texto menor */
  }
}
/* ===== USUÁRIOS ===== */
.user-section {
  margin-bottom: 2rem;
}

.user-controls {
  display: flex;
  gap: 0.75rem;
  margin-bottom: 1rem;
}

.user-list {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
}

.user-card {
  background: white;
  border-radius: 8px;
  padding: 1rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  width: 200px;
  transition: transform 0.3s;
}

.user-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.user-card.active {
  border: 2px solid #1e88e5;
}

.user-name {
  font-weight: 600;
  font-size: 1rem;
  margin-bottom: 0.5rem;
}

.user-role {
  font-size: 0.85rem;
  color: #666;
  margin-bottom: 0.5rem;
}

.user-status {
  font-size: 0.8rem;
  padding: 0.25rem 0.5rem;
  border-radius: 12px;
  display: inline-block;
}

.status-active {
  background-color: #e8f5e9;
  color: #2e7d32;
}

.status-inactive {
  background-color: #ffebee;
  color: #c62828;
}

.user-actions {
  margin-top: 0.75rem;
  display: flex;
  gap: 0.5rem;
}

.user-btn {
  padding: 0.4rem 0.8rem;
  font-size: 0.8rem;
  border-radius: 4px;
}

/* ===== MODAL ===== */
.modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  align-items: center;
  justify-content: center;
}

.modal-content {
  background: white;
  border-radius: 12px;
  width: 90%;
  max-width: 500px;
  padding: 2rem;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
}

.modal-title {
  font-size: 1.25rem;
  font-weight: 600;
}

.close {
  font-size: 1.5rem;
  cursor: pointer;
  color: #777;
}

.close:hover {
  color: #333;
}

.user-form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 1rem;
}
/* ===== MEDIA QUERIES PARA RESPONSIVIDADE ===== */

/* Telas médias (tablets) */
@media (max-width: 1024px) {
  .grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }
  
  main {
    padding: 1.5rem;
  }
  
  .user-card {
    width: calc(50% - 0.5rem);
  }
}

/* Telas pequenas (mobile) */
@media (max-width: 768px) {
  /* Header já está responsivo, mas vou manter */
  
  main {
    padding: 1rem;
  }
  
  .grid {
    gap: 1rem;
  }
  
  .card {
    padding: 1rem;
    border-radius: 8px;
  }
  
  /* FORMULÁRIO */
  .row {
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .field {
    gap: 0.35rem;
  }
  
  input, select, textarea {
    padding: 0.65rem;
    font-size: 16px; /* Evita zoom no iOS */
  }
  
  .form-actions {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .btn {
    width: 100%;
    padding: 0.75rem;
  }
  
  /* TABELA */
  .table-wrapper {
    overflow-x: auto;
    margin: 0 -1rem;
    padding: 0 1rem;
  }
  
  .table {
    min-width: 700px; /* Força rolagem horizontal */
  }
  
  .table th,
  .table td {
    padding: 0.75rem 0.5rem;
    font-size: 0.85rem;
  }
  
  .filters {
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .search, select {
    width: 100%;
  }
  
  /* USUÁRIOS */
  .user-section {
    margin-bottom: 1.5rem;
  }
  
  .user-controls {
    flex-direction: column;
  }
  
  .user-list {
    flex-direction: column;
  }
  
  .user-card {
    width: 100%;
  }
  
  .user-actions {
    justify-content: flex-start;
  }
  
  .user-btn {
    padding: 0.5rem 1rem;
  }
  
  /* TOTALS */
  .totals {
    flex-direction: column;
    gap: 0.75rem;
  }
  
  .chip {
    width: 100%;
    text-align: center;
  }
  
  /* MODAL */
  .modal-content {
    width: 95%;
    padding: 1.5rem;
    margin: 1rem;
  }
}

/* Telas muito pequenas */
@media (max-width: 480px) {
  header h1 {
    font-size: 1.4rem;
  }
  
  .lead {
    font-size: 0.8rem;
  }
  
  .controls {
    width: 100%;
    justify-content: space-between;
  }
  
  .btn {
    font-size: 0.85rem;
    padding: 0.6rem;
  }
  
  .table th,
  .table td {
    padding: 0.5rem 0.35rem;
    font-size: 0.8rem;
  }
  
  /* Ações na tabela em coluna */
  .table td:last-child {
    min-width: 120px;
  }
  
  .table td:last-child .btn {
    padding: 0.4rem 0.6rem;
    font-size: 0.8rem;
    margin: 0.1rem;
  }
}
</style>
</head>

<body>
<div class="app">

<!-- ===== CABEÇALHO ===== -->
<header>
<div>
<h1>Paixão e Saúde</h1>
<p class="lead">Gerencie exames, funcionários e obrigações ocupacionais, com a paixão pelo outro.</p>
</div>

<nav class="controls">
<button onclick="window.location.href='afastamentos.html'" class="btn btn-ghost">
    Afastamentos
</button>
<button id="btnClear" class="btn btn-ghost">Limpar tudo</button>
</nav>
</header>


<!-- ===== CONTEÚDO PRINCIPAL ===== -->
<main class="grid">

<!-- ========================== FORMULÁRIO LATERAL ========================== -->
<aside class="card">

<form id="form" novalidate>
<input type="hidden" id="id">

<div class="field">
<label for="title">Funcionário *</label>
<input id="title" type="text"
placeholder="Nome completo do funcionário"
minlength="3" maxlength="60" required>
</div>

<div class="field">
<label for="supplier">Cargo / Função *</label>
<input id="supplier" type="text"
placeholder="Ex: Operador de Máquinas"
minlength="3" maxlength="40" required>
</div>

<div class="field">
<label for="category">Tipo de Exame *</label>
<select id="category" required>
<option value="">Selecione</option>
<option value="Admissional">Admissional</option>
<option value="Periódico">Periódico</option>
<option value="Demissional">Demissional</option>
<option value="Mudança de Função">Mudança de Função</option>
<option value="Retorno ao Trabalho">Retorno ao Trabalho</option>
<option value="Outro">Outro</option>
</select>
</div>

<div class="row">
<div class="col field">
<label for="quantity">Idade *</label>
<input id="quantity" type="number" min="16" max="80" value="25" required>
</div>

<div class="col field">
<label for="unitPrice">Custo do Exame (R$)</label>
<input id="unitPrice" type="number" min="0" step="0.01" value="0.00">
</div>
</div>

<div class="field">
<label for="date">Data do Exame *</label>
<input id="date" type="date" required>
</div>

<div class="field">
<label for="notes">Observações clínicas</label>
<textarea id="notes" maxlength="200"
placeholder="Informações relevantes do exame ou histórico do funcionário"></textarea>
</div>

<div class="form-actions">
<button type="submit" class="btn btn-primary">Salvar</button>
<button type="reset" id="btnReset" class="btn btn-ghost">Limpar</button>
</div>
</form>

<div class="chip" style="margin-top:12px">
<p class="small">Registros salvos: <strong id="count">0</strong></p>
<p class="small">Custo total: <strong id="total">R$ 0,00</strong></p>
</div>

</aside>



<!-- ======================== TABELA PRINCIPAL ======================== -->
<section class="card">

<div class="user-section">
  <div class="user-controls">
    <button id="btnAddUser" class="btn btn-primary">Adicionar Usuário</button>
    <button id="btnRefreshUsers" class="btn btn-ghost">Atualizar</button>
  </div>
  
  <div class="user-list" id="userList">
    <!-- Usuários serão carregados aqui -->
  </div>
</div>

<div class="filters">
<input id="q" class="search" type="search"
placeholder="Pesquisar funcionário, cargo ou tipo de exame">

<select id="filterCategory">
<option value="">Todos os exames</option>
<option>Admissional</option>
<option>Periódico</option>
<option>Demissional</option>
<option>Mudança de Função</option>
<option>Retorno ao Trabalho</option>
<option>Outro</option>
</select>

<select id="sortBy">
<option value="date_desc">Mais recentes</option>
<option value="date_asc">Mais antigos</option>
<option value="price_desc">Maior custo</option>
<option value="price_asc">Menor custo</option>
</select>
</div>

<table class="table" id="table">
<thead>
<tr>
<th>Funcionário</th>
<th>Cargo</th>
<th>Tipo</th>
<th>Idade</th>
<th>Custo (R$)</th>
<th>Data</th>
<th>Ações</th>
</tr>
</thead>

<tbody id="tbody">
<tr class="empty-row">
<td class="empty" colspan="7">Nenhum exame cadastrado.</td>
</tr>
</tbody>
</table>

<div class="totals">
<div class="chip">Total em exames: <strong id="grandTotal">R$ 0,00</strong></div>
<div class="chip">Funcionários registrados: <strong id="itemsTotal">0</strong></div>
</div>

</section>

</main>

<!-- ===== MODAL DE USUÁRIO ===== -->
<div id="userModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 class="modal-title" id="modalTitle">Adicionar Usuário</h3>
      <span class="close">&times;</span>
    </div>
    <form id="userForm" class="user-form">
      <input type="hidden" id="userId">
      <div class="field">
        <label for="userName">Nome *</label>
        <input type="text" id="userName" required>
      </div>
      <div class="field">
        <label for="userEmail">Email *</label>
        <input type="email" id="userEmail" required>
      </div>
      <div class="field">
        <label for="userRole">Cargo *</label>
        <input type="text" id="userRole" required>
      </div>
      <div class="field">
        <label for="userStatus">Status</label>
        <select id="userStatus">
          <option value="active">Ativo</option>
          <option value="inactive">Inativo</option>
        </select>
      </div>
      <div class="form-actions">
        <button type="button" id="btnCancelUser" class="btn btn-ghost">Cancelar</button>
        <button type="submit" class="btn btn-primary">Salvar</button>
      </div>
    </form>
  </div>
</div>

<!-- ===== RODAPÉ ===== -->
<footer>
<p>© 2025 Paixão e Saúde — Sistema de Gestão Ocupacional</p>
</footer>

</div>

<input id="fileInput" type="file" accept="application/json" hidden>

<script>
// ===== DADOS INICIAIS =====
let users = [
  {
    id: 1,
    name: "Cristiano Ronaldo",
    email: "cr7.ronaldo@empresa.com",
    role: "Doutor Cirurgião",
    status: "active"
  },
  {
    id: 2,
    name: "Kyrie Irving",
    email: "kyrie.irving@empresa.com",
    role: "Técnico em Segurança",
    status: "active"
  },
  {
    id: 3,
    name: "Lamar Jackson",
    email: "lamar.jackson@empresa.com",
    role: "Atleta",
    status: "inactive"
  }
];

let exams = [];
let currentUser = null;
let nextUserId = 4;

// ===== FUNÇÕES DE USUÁRIOS =====
function renderUsers() {
  const userList = document.getElementById('userList');
  userList.innerHTML = '';
  
  users.forEach(user => {
    const userCard = document.createElement('div');
    userCard.className = `user-card ${user.id === currentUser?.id ? 'active' : ''}`;
    
    userCard.innerHTML = `
      <div class="user-name">${user.name}</div>
      <div class="user-role">${user.role}</div>
      <div class="user-status ${user.status === 'active' ? 'status-active' : 'status-inactive'}">
        ${user.status === 'active' ? 'Ativo' : 'Inativo'}
      </div>
      <div class="user-actions">
        <button class="btn btn-primary user-btn" onclick="selectUser(${user.id})">Selecionar</button>
        <button class="btn btn-ghost user-btn" onclick="editUser(${user.id})">Editar</button>
      </div>
    `;
    
    userList.appendChild(userCard);
  });
}

function selectUser(userId) {
  currentUser = users.find(user => user.id === userId);
  renderUsers();
  
  // Atualizar a interface para mostrar o usuário selecionado
  alert(`Usuário ${currentUser.name} selecionado!`);
}

function openUserModal() {
  document.getElementById('userModal').style.display = 'flex';
  document.getElementById('modalTitle').textContent = 'Adicionar Usuário';
  document.getElementById('userForm').reset();
  document.getElementById('userId').value = '';
}

function closeUserModal() {
  document.getElementById('userModal').style.display = 'none';
}

function editUser(userId) {
  const user = users.find(user => user.id === userId);
  if (!user) return;
  
  document.getElementById('userModal').style.display = 'flex';
  document.getElementById('modalTitle').textContent = 'Editar Usuário';
  document.getElementById('userId').value = user.id;
  document.getElementById('userName').value = user.name;
  document.getElementById('userEmail').value = user.email;
  document.getElementById('userRole').value = user.role;
  document.getElementById('userStatus').value = user.status;
}

function saveUser(event) {
  event.preventDefault();
  
  const userId = document.getElementById('userId').value;
  const name = document.getElementById('userName').value;
  const email = document.getElementById('userEmail').value;
  const role = document.getElementById('userRole').value;
  const status = document.getElementById('userStatus').value;
  
  if (userId) {
    // Editar usuário existente
    const index = users.findIndex(user => user.id === parseInt(userId));
    if (index !== -1) {
      users[index] = { ...users[index], name, email, role, status };
    }
  } else {
    // Adicionar novo usuário
    const newUser = {
      id: nextUserId++,
      name,
      email,
      role,
      status
    };
    users.push(newUser);
  }
  
  renderUsers();
  closeUserModal();
}

// ===== FUNÇÕES DE EXAMES =====
function renderExams() {
  const tbody = document.getElementById('tbody');
  const emptyRow = document.querySelector('.empty-row');
  
  if (exams.length === 0) {
    emptyRow.style.display = '';
    return;
  }
  
  emptyRow.style.display = 'none';
  tbody.innerHTML = '';
  
  exams.forEach(exam => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${exam.title}</td>
      <td>${exam.supplier}</td>
      <td>${exam.category}</td>
      <td>${exam.quantity}</td>
      <td>R$ ${parseFloat(exam.unitPrice).toFixed(2)}</td>
      <td>${formatDate(exam.date)}</td>
      <td>
        <button class="btn btn-ghost" onclick="editExam(${exam.id})">Editar</button>
        <button class="btn btn-danger" onclick="deleteExam(${exam.id})">Excluir</button>
      </td>
    `;
    tbody.appendChild(row);
  });
  
  updateStats();
}

function formatDate(dateString) {
  const date = new Date(dateString);
  return date.toLocaleDateString('pt-BR');
}

function updateStats() {
  const count = exams.length;
  const total = exams.reduce((sum, exam) => sum + parseFloat(exam.unitPrice), 0);
  
  document.getElementById('count').textContent = count;
  document.getElementById('total').textContent = `R$ ${total.toFixed(2)}`;
  document.getElementById('grandTotal').textContent = `R$ ${total.toFixed(2)}`;
  document.getElementById('itemsTotal').textContent = count;
}

function saveExam(event) {
  event.preventDefault();
  
  const id = document.getElementById('id').value;
  const title = document.getElementById('title').value;
  const supplier = document.getElementById('supplier').value;
  const category = document.getElementById('category').value;
  const quantity = document.getElementById('quantity').value;
  const unitPrice = document.getElementById('unitPrice').value;
  const date = document.getElementById('date').value;
  const notes = document.getElementById('notes').value;
  
  const exam = {
    id: id ? parseInt(id) : Date.now(),
    title,
    supplier,
    category,
    quantity: parseInt(quantity),
    unitPrice: parseFloat(unitPrice),
    date,
    notes
  };
  
  if (id) {
    // Editar exame existente
    const index = exams.findIndex(e => e.id === parseInt(id));
    if (index !== -1) {
      exams[index] = exam;
    }
  } else {
    // Adicionar novo exame
    exams.push(exam);
  }
  
  renderExams();
  document.getElementById('form').reset();
  document.getElementById('id').value = '';
}

function editExam(id) {
  const exam = exams.find(e => e.id === id);
  if (!exam) return;
  
  document.getElementById('id').value = exam.id;
  document.getElementById('title').value = exam.title;
  document.getElementById('supplier').value = exam.supplier;
  document.getElementById('category').value = exam.category;
  document.getElementById('quantity').value = exam.quantity;
  document.getElementById('unitPrice').value = exam.unitPrice;
  document.getElementById('date').value = exam.date;
  document.getElementById('notes').value = exam.notes;
}

function deleteExam(id) {
  if (confirm('Tem certeza que deseja excluir este exame?')) {
    exams = exams.filter(e => e.id !== id);
    renderExams();
  }
}

// ===== INICIALIZAÇÃO =====
document.addEventListener('DOMContentLoaded', function() {
  // Configurar data atual como padrão
  const today = new Date().toISOString().split('T')[0];
  document.getElementById('date').value = today;
  
  // Renderizar dados iniciais
  renderUsers();
  renderExams();
  
  // Event Listeners
  document.getElementById('form').addEventListener('submit', saveExam);
  document.getElementById('btnReset').addEventListener('click', function() {
    document.getElementById('id').value = '';
  });
  
  // Usuários
  document.getElementById('btnAddUser').addEventListener('click', openUserModal);
  document.getElementById('btnRefreshUsers').addEventListener('click', renderUsers);
  document.getElementById('userForm').addEventListener('submit', saveUser);
  
  // Modal
  document.querySelector('.close').addEventListener('click', closeUserModal);
  document.getElementById('btnCancelUser').addEventListener('click', closeUserModal);
  
  // Fechar modal ao clicar fora
  window.addEventListener('click', function(event) {
    const modal = document.getElementById('userModal');
    if (event.target === modal) {
      closeUserModal();
    }
  });
});
</script>
</body>
</html>